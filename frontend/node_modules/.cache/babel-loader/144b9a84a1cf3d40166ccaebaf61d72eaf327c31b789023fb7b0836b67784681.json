{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import Header from'../components/Header';import FileList from'../components/FileList';import DragNDrop from'../components/DragNDrop';import SendFilesButtonContainer from'../containers/SendFilesButtonContainer';import FilesChatContainer from'../containers/FileChatContainer';import axios from'axios';import{handleError}from'../utils/errorHandler';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SharePage(){const{roomCode}=useParams();const[files,setFiles]=useState([]);const[sharedFiles,setSharedFiles]=useState([]);const[inSendingProcess,setInSendingProcess]=useState(false);const navigate=useNavigate();const roomCheckRan=useRef(false);useEffect(()=>{if(roomCheckRan.current)return;async function checkRoom(){try{const{data}=await axios.get(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/check/\").concat(roomCode));if(data.error){throw new Error(\"An error happend while checking room validity: \".concat(data.error));}if(!data.doesRoomExists){navigate(\"/Naughty\",{replace:true});}}catch(error){handleError(error,'There is a problem in the server, Please go to another room');}}checkRoom();},[inSendingProcess]);return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen bg-customeGrey flex flex-col\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex overflow-y-auto flex-row gap-5 p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 flex space-y-5 flex-col\",children:[/*#__PURE__*/_jsx(DragNDrop,{setFiles:setFiles}),/*#__PURE__*/_jsx(FileList,{files:files,setFiles:setFiles,inSendingProcess:inSendingProcess}),/*#__PURE__*/_jsx(SendFilesButtonContainer,{files:files,setFiles:setFiles,setSharedFiles:setSharedFiles,setInSendingProcess:setInSendingProcess})]}),/*#__PURE__*/_jsx(FilesChatContainer,{sharedFiles:sharedFiles,setSharedFiles:setSharedFiles})]})]});}export default SharePage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","Header","FileList","DragNDrop","SendFilesButtonContainer","FilesChatContainer","axios","handleError","jsx","_jsx","jsxs","_jsxs","SharePage","roomCode","files","setFiles","sharedFiles","setSharedFiles","inSendingProcess","setInSendingProcess","navigate","roomCheckRan","current","checkRoom","data","get","concat","process","env","REACT_APP_API_BASE_URL","error","Error","doesRoomExists","replace","className","children"],"sources":["/myreactdd/frontend/src/pages/SharePage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport Header from '../components/Header'\r\nimport FileList from '../components/FileList'\r\nimport DragNDrop from '../components/DragNDrop'\r\nimport SendFilesButtonContainer from '../containers/SendFilesButtonContainer';\r\nimport FilesChatContainer from '../containers/FileChatContainer';\r\nimport axios from 'axios';\r\nimport { handleError } from '../utils/errorHandler';\r\n\r\n\r\nfunction SharePage() {\r\n  const { roomCode } = useParams();\r\n  const [files, setFiles] = useState([])\r\n  const [sharedFiles, setSharedFiles] = useState([])\r\n  const [inSendingProcess, setInSendingProcess] = useState(false)\r\n  const navigate = useNavigate()\r\n  const roomCheckRan = useRef(false)\r\n\r\n  useEffect(() => {\r\n    if (roomCheckRan.current) return\r\n\r\n    async function checkRoom() {\r\n      try {\r\n        const { data } = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/check/${roomCode}`)\r\n\r\n        if (data.error) {\r\n          throw new Error(`An error happend while checking room validity: ${data.error}`)\r\n        }\r\n\r\n        if (!data.doesRoomExists) {\r\n          navigate(\"/Naughty\", { replace: true })\r\n        }\r\n      } catch (error) {\r\n        handleError(error, 'There is a problem in the server, Please go to another room')\r\n      }\r\n    }\r\n    \r\n    checkRoom();\r\n  }, [inSendingProcess])\r\n  \r\n\r\n  return (\r\n    <div className='h-screen bg-customeGrey flex flex-col'>\r\n      <Header />\r\n      <div className='flex overflow-y-auto flex-row gap-5 p-2'>\r\n        <div className='w-1/2 flex space-y-5 flex-col'>\r\n          <DragNDrop setFiles={setFiles}/>\r\n          <FileList files={files} setFiles={setFiles} inSendingProcess={inSendingProcess}/>\r\n          <SendFilesButtonContainer files={files} setFiles={setFiles} setSharedFiles={setSharedFiles} setInSendingProcess={setInSendingProcess}/>\r\n        </div>\r\n        <FilesChatContainer sharedFiles={sharedFiles} setSharedFiles={setSharedFiles}/>\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default SharePage\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,wBAAwB,KAAM,wCAAwC,CAC7E,MAAO,CAAAC,kBAAkB,KAAM,iCAAiC,CAChE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGpD,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAAEC,QAAS,CAAC,CAAGd,SAAS,CAAC,CAAC,CAChC,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACoB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACsB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAAwB,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAqB,YAAY,CAAGvB,MAAM,CAAC,KAAK,CAAC,CAElCD,SAAS,CAAC,IAAM,CACd,GAAIwB,YAAY,CAACC,OAAO,CAAE,OAE1B,cAAe,CAAAC,SAASA,CAAA,CAAG,CACzB,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,YAAAH,MAAA,CAAUb,QAAQ,CAAE,CAAC,CAE3F,GAAIW,IAAI,CAACM,KAAK,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,mDAAAL,MAAA,CAAmDF,IAAI,CAACM,KAAK,CAAE,CAAC,CACjF,CAEA,GAAI,CAACN,IAAI,CAACQ,cAAc,CAAE,CACxBZ,QAAQ,CAAC,UAAU,CAAE,CAAEa,OAAO,CAAE,IAAK,CAAC,CAAC,CACzC,CACF,CAAE,MAAOH,KAAK,CAAE,CACdvB,WAAW,CAACuB,KAAK,CAAE,6DAA6D,CAAC,CACnF,CACF,CAEAP,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACL,gBAAgB,CAAC,CAAC,CAGtB,mBACEP,KAAA,QAAKuB,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpD1B,IAAA,CAACR,MAAM,GAAE,CAAC,cACVU,KAAA,QAAKuB,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACtDxB,KAAA,QAAKuB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eAC5C1B,IAAA,CAACN,SAAS,EAACY,QAAQ,CAAEA,QAAS,CAAC,CAAC,cAChCN,IAAA,CAACP,QAAQ,EAACY,KAAK,CAAEA,KAAM,CAACC,QAAQ,CAAEA,QAAS,CAACG,gBAAgB,CAAEA,gBAAiB,CAAC,CAAC,cACjFT,IAAA,CAACL,wBAAwB,EAACU,KAAK,CAAEA,KAAM,CAACC,QAAQ,CAAEA,QAAS,CAACE,cAAc,CAAEA,cAAe,CAACE,mBAAmB,CAAEA,mBAAoB,CAAC,CAAC,EACpI,CAAC,cACNV,IAAA,CAACJ,kBAAkB,EAACW,WAAW,CAAEA,WAAY,CAACC,cAAc,CAAEA,cAAe,CAAC,CAAC,EAC5E,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAL,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}