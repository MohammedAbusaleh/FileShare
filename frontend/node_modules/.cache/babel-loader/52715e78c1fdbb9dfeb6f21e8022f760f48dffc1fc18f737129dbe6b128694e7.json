{"ast":null,"code":"var _jsxFileName = \"/myreactdd/frontend/src/containers/CodeFormContainer.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport CodeForm from '../components/CodeForm';\nimport axios from 'axios';\nimport { handleError } from '../utils/errorHandler';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CodeFormContainer() {\n  _s();\n  const [roomCode, setRoomCode] = useState('');\n  const [isCreating, setIsCreating] = useState(false);\n  const navigate = useNavigate();\n  const handleSubmitRoom = event => {\n    event.preventDefault();\n    if (roomCode) {\n      navigate(`/room/${roomCode}`);\n    } else {\n      alert('Brohter enter a room code');\n    }\n  };\n  async function handleCreateRoom() {\n    if (isCreating) return;\n    setIsCreating(true);\n    try {\n      const {\n        data: idData\n      } = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/get-generated-id`);\n      if (idData.error) {\n        throw new Error(`Failed to generate room code (id): ${idData.error}`);\n      }\n      const {\n        data: roomData\n      } = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/create-room`, {\n        roomId: idData.roomId\n      });\n      if (roomData.error) {\n        throw new Error(`Failed to create room: ${roomData.error}`);\n      }\n      navigate(`/room/${roomData.roomId}`);\n    } catch (error) {\n      handleError(error, `Failed to create room, please try again later`);\n    } finally {\n      setIsCreating(false);\n    }\n  }\n  const handleInputChange = e => {\n    const value = e.target.value;\n    if (/^[a-z-]*$/.test(value)) {\n      setRoomCode(value);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CodeForm, {\n    roomCode: roomCode,\n    handleSubmit: handleSubmitRoom,\n    handleInputChange: handleInputChange,\n    handleCreateRoom: handleCreateRoom\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(CodeFormContainer, \"dkPK7FLT/kEyXmCtibzsluuK908=\", false, function () {\n  return [useNavigate];\n});\n_c = CodeFormContainer;\nexport default CodeFormContainer;\nvar _c;\n$RefreshReg$(_c, \"CodeFormContainer\");","map":{"version":3,"names":["React","useState","useNavigate","CodeForm","axios","handleError","jsxDEV","_jsxDEV","CodeFormContainer","_s","roomCode","setRoomCode","isCreating","setIsCreating","navigate","handleSubmitRoom","event","preventDefault","alert","handleCreateRoom","data","idData","get","process","env","REACT_APP_API_BASE_URL","error","Error","roomData","post","roomId","handleInputChange","e","value","target","test","handleSubmit","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/myreactdd/frontend/src/containers/CodeFormContainer.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport CodeForm from '../components/CodeForm';\r\nimport axios from 'axios';\r\nimport { handleError } from '../utils/errorHandler';\r\n\r\nfunction CodeFormContainer() {\r\n  const [roomCode, setRoomCode] = useState('');\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  const navigate = useNavigate()\r\n\r\n  const handleSubmitRoom = (event) => {\r\n    event.preventDefault()\r\n    if (roomCode) {\r\n      navigate(`/room/${roomCode}`)\r\n    } else {\r\n      alert('Brohter enter a room code')\r\n    }\r\n  }\r\n\r\n  async function handleCreateRoom() {\r\n    if (isCreating) return\r\n    setIsCreating(true)\r\n\r\n    try {\r\n      const { data: idData } = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/get-generated-id`);\r\n      if (idData.error) {\r\n        throw new Error(`Failed to generate room code (id): ${idData.error}`)\r\n      }\r\n\r\n      const { data: roomData } = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/create-room`, {roomId: idData.roomId})\r\n      if (roomData.error) {\r\n        throw new Error(`Failed to create room: ${roomData.error}`)\r\n      }\r\n      \r\n      navigate(`/room/${roomData.roomId}`)\r\n\r\n    } catch (error) {\r\n      handleError(error, `Failed to create room, please try again later`)\r\n    } finally {\r\n      setIsCreating(false)\r\n    }\r\n  }\r\n\r\n  const handleInputChange = (e) => {\r\n    const value = e.target.value;\r\n    if (/^[a-z-]*$/.test(value)) {\r\n      setRoomCode(value);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CodeForm roomCode={roomCode} handleSubmit={handleSubmitRoom} handleInputChange={handleInputChange} handleCreateRoom={handleCreateRoom}/>\r\n  )\r\n}\r\n\r\nexport default CodeFormContainer\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,SAASC,iBAAiBA,CAAA,EAAG;EAAAC,EAAA;EAC3B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMa,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAE9B,MAAMa,gBAAgB,GAAIC,KAAK,IAAK;IAClCA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,IAAIP,QAAQ,EAAE;MACZI,QAAQ,CAAC,SAASJ,QAAQ,EAAE,CAAC;IAC/B,CAAC,MAAM;MACLQ,KAAK,CAAC,2BAA2B,CAAC;IACpC;EACF,CAAC;EAED,eAAeC,gBAAgBA,CAAA,EAAG;IAChC,IAAIP,UAAU,EAAE;IAChBC,aAAa,CAAC,IAAI,CAAC;IAEnB,IAAI;MACF,MAAM;QAAEO,IAAI,EAAEC;MAAO,CAAC,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,mBAAmB,CAAC;MAClG,IAAIJ,MAAM,CAACK,KAAK,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,sCAAsCN,MAAM,CAACK,KAAK,EAAE,CAAC;MACvE;MAEA,MAAM;QAAEN,IAAI,EAAEQ;MAAS,CAAC,GAAG,MAAMxB,KAAK,CAACyB,IAAI,CAAC,GAAGN,OAAO,CAACC,GAAG,CAACC,sBAAsB,cAAc,EAAE;QAACK,MAAM,EAAET,MAAM,CAACS;MAAM,CAAC,CAAC;MACzH,IAAIF,QAAQ,CAACF,KAAK,EAAE;QAClB,MAAM,IAAIC,KAAK,CAAC,0BAA0BC,QAAQ,CAACF,KAAK,EAAE,CAAC;MAC7D;MAEAZ,QAAQ,CAAC,SAASc,QAAQ,CAACE,MAAM,EAAE,CAAC;IAEtC,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACdrB,WAAW,CAACqB,KAAK,EAAE,+CAA+C,CAAC;IACrE,CAAC,SAAS;MACRb,aAAa,CAAC,KAAK,CAAC;IACtB;EACF;EAEA,MAAMkB,iBAAiB,GAAIC,CAAC,IAAK;IAC/B,MAAMC,KAAK,GAAGD,CAAC,CAACE,MAAM,CAACD,KAAK;IAC5B,IAAI,WAAW,CAACE,IAAI,CAACF,KAAK,CAAC,EAAE;MAC3BtB,WAAW,CAACsB,KAAK,CAAC;IACpB;EACF,CAAC;EAED,oBACE1B,OAAA,CAACJ,QAAQ;IAACO,QAAQ,EAAEA,QAAS;IAAC0B,YAAY,EAAErB,gBAAiB;IAACgB,iBAAiB,EAAEA,iBAAkB;IAACZ,gBAAgB,EAAEA;EAAiB;IAAAkB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;AAE7I;AAAC/B,EAAA,CAhDQD,iBAAiB;EAAA,QAGPN,WAAW;AAAA;AAAAuC,EAAA,GAHrBjC,iBAAiB;AAkD1B,eAAeA,iBAAiB;AAAA,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}