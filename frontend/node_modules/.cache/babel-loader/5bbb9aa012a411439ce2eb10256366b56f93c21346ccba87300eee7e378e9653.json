{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import CodeForm from'../components/CodeForm';import axios from'axios';import{handleError}from'../utils/errorHandler';import{jsx as _jsx}from\"react/jsx-runtime\";function CodeFormContainer(){const[roomCode,setRoomCode]=useState('');const[isCreating,setIsCreating]=useState(false);const navigate=useNavigate();const handleSubmitRoom=event=>{event.preventDefault();if(roomCode){navigate(\"/room/\".concat(roomCode));}else{alert('Brohter enter a room code');}};async function handleCreateRoom(){if(isCreating)return;setIsCreating(true);try{const{data:idData}=await axios.get(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/get-generated-id\"));if(idData.error){throw new Error(\"Failed to generate room code (id): \".concat(idData.error));}const{data:roomData}=await axios.post(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/create-room\"),{roomId:idData.roomId});if(roomData.error){throw new Error(\"Failed to create room: \".concat(roomData.error));}navigate(\"/room/\".concat(roomData.roomId));}catch(error){handleError(error,\"Failed to create room, please try again later\");}finally{setIsCreating(false);}}const handleInputChange=e=>{const value=e.target.value;if(/^[a-z-]*$/.test(value)){setRoomCode(value);}};return/*#__PURE__*/_jsx(CodeForm,{roomCode:roomCode,handleSubmit:handleSubmitRoom,handleInputChange:handleInputChange,handleCreateRoom:handleCreateRoom});}export default CodeFormContainer;","map":{"version":3,"names":["React","useState","useNavigate","CodeForm","axios","handleError","jsx","_jsx","CodeFormContainer","roomCode","setRoomCode","isCreating","setIsCreating","navigate","handleSubmitRoom","event","preventDefault","concat","alert","handleCreateRoom","data","idData","get","process","env","REACT_APP_API_BASE_URL","error","Error","roomData","post","roomId","handleInputChange","e","value","target","test","handleSubmit"],"sources":["C:/Users/WADREN/Desktop/brrr/react/myreactdd/frontend/src/containers/CodeFormContainer.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport CodeForm from '../components/CodeForm';\r\nimport axios from 'axios';\r\nimport { handleError } from '../utils/errorHandler';\r\n\r\nfunction CodeFormContainer() {\r\n  const [roomCode, setRoomCode] = useState('');\r\n  const [isCreating, setIsCreating] = useState(false);\r\n  const navigate = useNavigate()\r\n\r\n  const handleSubmitRoom = (event) => {\r\n    event.preventDefault()\r\n    if (roomCode) {\r\n      navigate(`/room/${roomCode}`)\r\n    } else {\r\n      alert('Brohter enter a room code')\r\n    }\r\n  }\r\n\r\n  async function handleCreateRoom() {\r\n    if (isCreating) return\r\n    setIsCreating(true)\r\n\r\n    try {\r\n      const { data: idData } = await axios.get(`${process.env.REACT_APP_API_BASE_URL}/get-generated-id`);\r\n      if (idData.error) {\r\n        throw new Error(`Failed to generate room code (id): ${idData.error}`)\r\n      }\r\n\r\n      const { data: roomData } = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/create-room`, {roomId: idData.roomId})\r\n      if (roomData.error) {\r\n        throw new Error(`Failed to create room: ${roomData.error}`)\r\n      }\r\n      \r\n      navigate(`/room/${roomData.roomId}`)\r\n\r\n    } catch (error) {\r\n      handleError(error, `Failed to create room, please try again later`)\r\n    } finally {\r\n      setIsCreating(false)\r\n    }\r\n  }\r\n\r\n  const handleInputChange = (e) => {\r\n    const value = e.target.value;\r\n    if (/^[a-z-]*$/.test(value)) {\r\n      setRoomCode(value);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CodeForm roomCode={roomCode} handleSubmit={handleSubmitRoom} handleInputChange={handleInputChange} handleCreateRoom={handleCreateRoom}/>\r\n  )\r\n}\r\n\r\nexport default CodeFormContainer\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,QAAQ,KAAM,wBAAwB,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpD,QAAS,CAAAC,iBAAiBA,CAAA,CAAG,CAC3B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAAY,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAY,gBAAgB,CAAIC,KAAK,EAAK,CAClCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,GAAIP,QAAQ,CAAE,CACZI,QAAQ,UAAAI,MAAA,CAAUR,QAAQ,CAAE,CAAC,CAC/B,CAAC,IAAM,CACLS,KAAK,CAAC,2BAA2B,CAAC,CACpC,CACF,CAAC,CAED,cAAe,CAAAC,gBAAgBA,CAAA,CAAG,CAChC,GAAIR,UAAU,CAAE,OAChBC,aAAa,CAAC,IAAI,CAAC,CAEnB,GAAI,CACF,KAAM,CAAEQ,IAAI,CAAEC,MAAO,CAAC,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,IAAAL,MAAA,CAAIM,OAAO,CAACC,GAAG,CAACC,sBAAsB,qBAAmB,CAAC,CAClG,GAAIJ,MAAM,CAACK,KAAK,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,uCAAAV,MAAA,CAAuCI,MAAM,CAACK,KAAK,CAAE,CAAC,CACvE,CAEA,KAAM,CAAEN,IAAI,CAAEQ,QAAS,CAAC,CAAG,KAAM,CAAAxB,KAAK,CAACyB,IAAI,IAAAZ,MAAA,CAAIM,OAAO,CAACC,GAAG,CAACC,sBAAsB,iBAAgB,CAACK,MAAM,CAAET,MAAM,CAACS,MAAM,CAAC,CAAC,CACzH,GAAIF,QAAQ,CAACF,KAAK,CAAE,CAClB,KAAM,IAAI,CAAAC,KAAK,2BAAAV,MAAA,CAA2BW,QAAQ,CAACF,KAAK,CAAE,CAAC,CAC7D,CAEAb,QAAQ,UAAAI,MAAA,CAAUW,QAAQ,CAACE,MAAM,CAAE,CAAC,CAEtC,CAAE,MAAOJ,KAAK,CAAE,CACdrB,WAAW,CAACqB,KAAK,gDAAiD,CAAC,CACrE,CAAC,OAAS,CACRd,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAEA,KAAM,CAAAmB,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAC5B,GAAI,WAAW,CAACE,IAAI,CAACF,KAAK,CAAC,CAAE,CAC3BvB,WAAW,CAACuB,KAAK,CAAC,CACpB,CACF,CAAC,CAED,mBACE1B,IAAA,CAACJ,QAAQ,EAACM,QAAQ,CAAEA,QAAS,CAAC2B,YAAY,CAAEtB,gBAAiB,CAACiB,iBAAiB,CAAEA,iBAAkB,CAACZ,gBAAgB,CAAEA,gBAAiB,CAAC,CAAC,CAE7I,CAEA,cAAe,CAAAX,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}